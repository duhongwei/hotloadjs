(function(e){"use strict";var n=[];var t={};var r=function(){var n=false;function t(e){if(e&&e.isShowLog){n=true}else{n=false}}function r(t){if(e.console&&e.console.log&&n){e.console.log(t)}}function i(){n=false}return{setConfig:t,log:r,reset:i}}();var i=function(){var e={};return function(n){var i=e[n.key]=e[n.key]||{};var f=null;if(i.unload){try{f=i.unload()}catch(e){r.log(e)}}var o=a(n.deps,function(e){return t[e].funed});n.funed=n.fun.apply(i,o);if(f&&i.load){try{i.load(f)}catch(e){r.log(e)}}s(n)}}();var f=function(){var e=[];function i(n){c(n.depKeys,function(n){if(o(e,n)===undefined){e.push(n)}i(t[n])})}return function(f){f.depKeys=t[f.key].depKeys;delete t[f.key];if(f.type==="require"){return}e=[];i(f);r.log("keys will update: "+e.join("\n"));c(e,function(e){var r=t[e];delete t[e];n.push(r)})}}();function o(e,n){for(var t=0;t<e.length;t++){if(e[t]===n){return e[t]}}return undefined}function u(e){return Object.prototype.toString.call(e)=="[object Array]"}function a(e,n){var t=[];c(e,function(e){t.push(n(e))});return t}function c(e,n){if(u(e)){for(var r=0;r<e.length;r++){if(n(e[r])===false){return}}}else{for(var i in e){if(t.hasOwnProperty(i)){if(n(e[i])===false){return}}}}}function l(){var e=document.scripts[document.scripts.length-1].src.split(/[?#]/)[0];if(!e){return false}var n=e.match(/^https?:\/\/[^/]+\/(.+)\.js$/);if(n){e=n[1]}else{e=e.replace(".js","")}return e}function s(e){c(e.deps,function(n){var r=t[n].depKeys;if(o(r,e.key)===undefined){r.push(e.key)}})}function d(e){for(var n=0,r=e.deps;n<r.length;n++){if(!r[n]){continue}if(!(r[n]in t)){return false}}return true}function p(e,n){if(!n){return e}if(!/^\./.test(e)){return e}var t=1;var r=e.match(/^(\.\.\/)+(.+)$/);if(r){t=r[0].split("../").length;e=r[2]}if(/^\.\//.test(e)){e=e.replace("./","")}n=n.split("/");n.length=n.length-t;e=n.join("/")+"/"+e;return e}function y(e,n,t){if(u(e)){t=n;n=e}else if(typeof e==="function"){t=e;n=[]}else if(typeof n==="function"){t=n;n=[]}if(!u(n)){throw"dependence must be array"}var r=l();if(typeof e!=="string"){e=r||b()}for(var i=0;i<n.length;i++){n[i]=r?p(n[i],r):n[i]}return{deps:n,fun:t,key:e}}function v(){var e=n.length;var t=null;while(t=n[--e]){if(d(t)){h(t);n.splice(e,1);if(t.type==="define"){e=n.length}}}}function h(e){i(e);if(e.key in t){r.log("hotload: "+e.key);f(e)}else{s(e)}t[e.key]=e;t.last=e}function g(e){e.depKeys=[];if(d(e)){h(e);if(e.type=="define"){v()}}else{n.push(e)}}function k(e,n,r){if(arguments.length===1&&typeof e==="string"){if(e in t){return t[e].funed}else{throw e+" not found"}}var i=y(e,n,r);i.type="require";g(i)}function m(e,n,t){var r=y(e,n,t);r.type="define";g(r)}function j(){return{waitingMod:n,readyMod:t}}function w(){n=[];t={};r.reset();M()}function K(e,n){var t=document.createElement("script");t.src=e;if(n){t.onreadystatechange=function(){if(t.readyState=="loaded"||t.readyState=="complete"){n()}};t.onload=function(){n()}}document.body.appendChild(t)}var b=function(){var e=0;return function(){return"k"+e++}}();function C(e){if(e.log){r.setConfig(e.log)}}function S(e){t.last.key=e}function q(e){var n=e.replace(".js","");return n in t}function M(){m("lego",function(){return{has:q,inspect:j,reset:w,load:K,setConfig:C,setLastReadyModuleKey:S}})}M();e.define=m;e.define.amd={};e.require=k})(this);